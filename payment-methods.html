<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment Methods ‚Äî PreoTrade FX</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- TOP NAVIGATION BAR -->
  <header class="top-nav">
    <div class="nav-left">
      <button id="menuToggle" class="menu-toggle">‚ò∞</button>
      <div class="logo" style="width: 32px; height: 32px; margin: 0 8px;">
        <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="lg3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#0055ff;stop-opacity:1" /><stop offset="100%" style="stop-color:#00d4ff;stop-opacity:1" /></linearGradient></defs><circle cx="100" cy="100" r="95" fill="none" stroke="url(#lg3)" stroke-width="2" opacity="0.3"/><path d="M 100 30 L 150 60 L 150 130 L 100 160 L 50 130 L 50 60 Z" fill="url(#lg3)" opacity="0.1"/><g><rect x="70" y="95" width="8" height="35" fill="#00d084" opacity="0.9"/><line x1="74" y1="85" x2="74" y2="135" stroke="#00d084" stroke-width="2"/><rect x="85" y="75" width="8" height="55" fill="#00d084" opacity="0.95"/><line x1="89" y1="65" x2="89" y2="135" stroke="#00d084" stroke-width="2"/><rect x="100" y="55" width="8" height="75" fill="#0055ff" opacity="1"/><line x1="104" y1="45" x2="104" y2="135" stroke="#0055ff" stroke-width="2"/><rect x="115" y="80" width="8" height="50" fill="#00d4ff" opacity="0.9"/><line x1="119" y1="70" x2="119" y2="135" stroke="#00d4ff" stroke-width="2"/></g></svg>
      </div>
      <h1>PreoTrade FX</h1>
    </div>
    <div class="nav-center">
      <span class="balance-display">Balance: <strong id="balance">$10,000.00</strong></span>
    </div>
    <div class="nav-right">
      <button id="toggleMode" class="nav-btn">Theme</button>
      <a href="index.html" class="nav-btn logout">Logout</a>
    </div>
  </header>

  <!-- SIDE MENU -->
  <nav id="sideMenu" class="side-menu">
    <button class="menu-close">&times;</button>
    <div class="menu-items">
      <a href="dashboard.html" class="menu-item">Dashboard</a>
      <a href="auto-trading.html" class="menu-item">Auto Trading</a>
      <a href="finances.html" class="menu-item">üí∞ Finances</a>
      <a href="transactions.html" class="menu-item">üìã Transactions</a>
      <a href="payment-methods.html" class="menu-item active">üí≥ Payment Methods</a>
      <a href="profile.html" class="menu-item">üë§ Profile</a>
    </div>
  </nav>

  <main class="main-container page-container">
    <!-- PAGE HEADER -->
    <div class="page-header">
      <h2>üí≥ Payment Methods</h2>
      <p>Manage your deposit and withdrawal methods</p>
    </div>

    <!-- PAYMENT OPTIONS -->
    <div class="payment-options">
      <!-- M-Pesa -->
      <section class="content-card payment-card">
        <h3>üì± M-Pesa</h3>
        <p>Send money directly to our M-Pesa account</p>
        <button class="action-btn" onclick="selectPaymentMethod('mpesa')">Select M-Pesa</button>
      </section>

      <!-- Bank Transfer -->
      <section class="content-card payment-card">
        <h3>üè¶ Bank Transfer</h3>
        <p>Wire transfer to our business account</p>
        <button class="action-btn" onclick="selectPaymentMethod('bank')">Select Bank Transfer</button>
      </section>

      <!-- Crypto Options -->
      <section class="content-card payment-card">
        <h3>üîó Cryptocurrency</h3>
        <p>Pay with your preferred cryptocurrency</p>
        <div class="crypto-grid">
          <button class="action-btn small" onclick="selectPaymentMethod('usdt')">üí≤ USDT</button>
          <button class="action-btn small" onclick="selectPaymentMethod('bitcoin')">‚Çø Bitcoin</button>
          <button class="action-btn small" onclick="selectPaymentMethod('ethereum')">Œû Ethereum</button>
          <button class="action-btn small" onclick="selectPaymentMethod('tron')">‚ü° Tron</button>
        </div>
      </section>
    </div>

    <!-- PAYMENT DETAILS -->
    <div id="paymentDetails" class="content-card" style="display:none; margin-top:20px;">
      <button class="action-btn outline" onclick="backToPaymentList()">‚Üê Back</button>
      <h3 id="paymentDetailsTitle">Payment Method</h3>
      <div id="paymentInfo" style="margin-top:15px; line-height:1.8;"></div>
      <div style="text-align:center; margin-top:20px;">
        <p style="font-size:12px; color:#888;">Copy and send payment to complete your transaction</p>
      </div>
    </div>
  </main>

  <script src="storage.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (!storage.isLoggedIn()) {
        window.location.href = 'index.html';
        return;
      }

      loadBalance();
      setupMenuToggle();
    });

    function loadBalance() {
      const balance = storage.getBalance('demo');
      document.getElementById('balance').textContent = '$' + balance.toLocaleString('en-US', {minimumFractionDigits: 2});
    }

    function selectPaymentMethod(method) {
      const details = {
        mpesa: { title: 'M-Pesa', info: 'Account: +254712345678\\nBusiness Name: PreoTrade FX\\nMinimum: $10' },
        bank: { title: 'Bank Transfer', info: 'Account: 1234567890\\nBank: Global Finance Bank\\nSwift: GFBKXX\\nMinimum: $50' },
        usdt: { title: 'USDT (TRC20)', info: 'Address: TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t\\nNetwork: TRC20\\nMinimum: $10' },
        bitcoin: { title: 'Bitcoin', info: 'Address: 1A1z7agoat7SBLkjvotQwNLac5cBacK8h2\\nNetwork: Bitcoin\\nMinimum: $50' },
        ethereum: { title: 'Ethereum', info: 'Address: 0x742d35Cc6634C0532925a3b844Bc9e7595f42e7\\nNetwork: ETH\\nMinimum: $10' },
        tron: { title: 'TRON', info: 'Address: TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t\\nNetwork: Tron\\nMinimum: $10' }
      };

      const detail = details[method];
      if (detail) {
        document.getElementById('paymentDetailsTitle').textContent = detail.title;
        document.getElementById('paymentInfo').innerHTML = '<pre style="white-space:pre-wrap; word-wrap:break-word;">' + detail.info + '</pre>';
        document.getElementById('paymentDetails').style.display = 'block';
      }
    }

    function backToPaymentList() {
      document.getElementById('paymentDetails').style.display = 'none';
    }

    function setupMenuToggle() {
      const menuToggle = document.getElementById('menuToggle');
      const sideMenu = document.getElementById('sideMenu');
      const menuClose = document.querySelector('.menu-close');
      const logout = document.querySelector('.logout');
      const toggleMode = document.getElementById('toggleMode');

      if (menuToggle) menuToggle.addEventListener('click', () => sideMenu?.classList.add('active'));
      if (menuClose) menuClose.addEventListener('click', () => sideMenu?.classList.remove('active'));
      if (logout) logout.addEventListener('click', (e) => {
        e.preventDefault();
        storage.removeUser();
        window.location.href = 'index.html';
      });
      if (toggleMode) toggleMode.addEventListener('click', () => {
        document.body.classList.toggle('light-mode');
        localStorage.setItem('theme', document.body.classList.contains('light-mode') ? 'light' : 'dark');
      });

      if (localStorage.getItem('theme') === 'light') {
        document.body.classList.add('light-mode');
      }
    }
  </script>
</body>
</html>
